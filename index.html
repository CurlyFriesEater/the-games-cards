```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>The Games ‚Äî Cards + Hints + Map</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --card-w: 100px;
      --card-h: 140px;
    }
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background:#333;
      color: #fff;
      text-align: center;
    }

    /* ---------------- Fixed card controls ---------------- */
    #cardControls {
      position: fixed;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      gap: 18px;
      z-index: 1100; /* above map & hints */
      pointer-events: auto;
    }

    /* small drawn card (3D flip) */
    .card-3d {
      width: var(--card-w);
      height: var(--card-h);
      perspective: 1000px;
    }

    .card-3d > .card-inner {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 420ms ease;
      transform-origin: center center;
      box-shadow: 0 6px 16px rgba(0,0,0,0.35);
      border-radius: 10px;
    }

    .card-3d .face {
      position: absolute;
      inset: 0;
      border-radius: 10px;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      text-align: center;
    }

    /* back (what you see initially) */
    .card-3d .back {
      background: url("card-back.png") center/cover no-repeat, #cc2222;
      background-blend-mode: normal;
      color: white;
      font-weight: bold;
      font-size: 0.9rem;
    }

    /* front (revealed after flip) */
    .card-3d .front {
      background: white;
      color: black;
      transform: rotateY(180deg); /* initially hidden */
      font-weight: 700;
      padding: 10px;
      font-size: 0.8rem;
    }

    /* deck stack at right */
    #deck {
      width: var(--card-w);
      height: var(--card-h);
      position: relative;
      display: inline-block;
      pointer-events: auto;
    }

    .deck-card {
      position: absolute;
      left: 0;
      top: 0;
      width: var(--card-w);
      height: var(--card-h);
      border-radius: 10px;
      background: url("card-back.png") center/cover no-repeat, #cc2222;
      box-shadow: 0 6px 14px rgba(0,0,0,0.35);
      transform-origin: center top;
      transition: transform 220ms ease, opacity 220ms ease;
    }

    /* flush stacked look: small vertical offsets, top-most visually above */
    .deck-card:nth-child(1){ transform: translateY(0px); z-index:1; }
    .deck-card:nth-child(2){ transform: translateY(-6px); z-index:2; }
    .deck-card:nth-child(3){ transform: translateY(-12px); z-index:3; }
    .deck-card:nth-child(4){ transform: translateY(-18px); z-index:4; }
    .deck-card:nth-child(5){ transform: translateY(-24px); z-index:5; }
    /* if you add more cards, add rules or set them by JS */

    /* Draw button */
    #drawBtn {
      padding: 10px 16px;
      border-radius: 8px;
      background: #444;
      color: #fff;
      border: 0;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
    #drawBtn:disabled { opacity: 0.5; cursor: not-allowed; }

    /* Hints panel (page content below fixed controls) */
    main {
      padding-top: 180px; /* ensure space for fixed cardControls */
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    #hints {
      background: #222;
      width: min(900px, 92%);
      padding: 18px;
      border-radius: 10px;
      color: #fff;
      text-align: left;
    }
    .hint-section { margin-top: 12px; }
    .hint-btn {
      margin: 6px 8px 6px 0;
      padding: 8px 12px;
      border-radius: 8px;
      background: #eee;
      color: #222;
      border: 0;
      font-weight: 700;
      cursor: pointer;
    }
    .hint-btn.used { background: #666; color: #ccc; transform: rotateY(180deg) scale(.98); cursor: default; }

    /* Map */
    #map {
      width: 100%;
      height: 560px;
      margin-top: 6px;
      box-shadow: inset 0 0 0 2px rgba(0,0,0,0.2);
    }

    /* small responsive adjustments */
    @media (max-width:640px){
      :root{ --card-w: 84px; --card-h: 120px; }
      #cardControls{ gap:10px; top:8px; }
    }
  </style>
</head>
<body>
  <!-- Card controls (fixed, don't move with scroll) -->
  <div id="cardControls" aria-hidden="false">
    <!-- small card on left -->
    <div class="card-3d" id="smallCard3d" aria-label="current card">
      <div class="card-inner" id="smallCardInner">
        <div class="face back" id="smallCardBack">The Games</div>
        <div class="face front" id="smallCardFront">?</div>
      </div>
    </div>

    <!-- draw button -->
    <button id="drawBtn" onclick="onDraw()">Draw</button>

    <!-- deck stack at right -->
    <div id="deck" aria-hidden="false">
      <!-- order: first child bottom, last child top -->
      <div class="deck-card"></div>
      <div class="deck-card"></div>
      <div class="deck-card"></div>
      <div class="deck-card"></div>
      <div class="deck-card"></div>
    </div>
  </div>

  <main>
    <!-- Hints -->
    <section id="hints" aria-labelledby="hints-heading">
      <h2 id="hints-heading">Hints</h2>

      <div class="hint-section">
        <strong>üì∑ Photo</strong><br>
        <button class="hint-btn" onclick="toggleHint(this)">Reveal Picture</button>
        <button class="hint-btn" onclick="toggleHint(this)">Look for Object</button>
      </div>

      <div class="hint-section">
        <strong>üåç Geographical</strong><br>
        <button class="hint-btn" onclick="toggleHint(this)">North / South Clue</button>
        <button class="hint-btn" onclick="toggleHint(this)">Map Marker</button>
      </div>

      <div class="hint-section">
        <strong>‚ú® Miscellaneous</strong><br>
        <button class="hint-btn" onclick="toggleHint(this)">Wildcard Hint</button>
        <button class="hint-btn" onclick="toggleHint(this)">Riddle</button>
      </div>
    </section>

    <h2 style="margin-top:20px;">Game Map</h2>
    <div id="map" role="application" aria-label="game map"></div>
  </main>

  <!-- ---------------- Scripts ---------------- -->
  <script>
    /* ---------------- Card draw logic & improved flipping ---------------- */
    const deckEl = document.getElementById('deck');
    const smallInner = document.getElementById('smallCardInner');
    const smallFront = document.getElementById('smallCardFront');
    const drawBtn = document.getElementById('drawBtn');

    const cards = [
      "Sing your favorite song out loud before continuing.",
      "Stop where you are and yell 'GYAT!'",
      "Do 10 jumping jacks.",
      "Find a stick and guess its length!",
      "Spin around 3 times."
    ];

    // Helper to animate a two-step flip so the card face isn't visible until halfway
    function flipSmallCardTo(text) {
      // Step 1: rotate to 90deg (half flip)
      smallInner.style.transition = 'transform 220ms ease';
      smallInner.style.transform = 'rotateY(90deg)';

      // After half-turn, swap the front text then complete the flip
      setTimeout(() => {
        smallFront.textContent = text;
        // step 2: rotate to 180deg to reveal front
        smallInner.style.transition = 'transform 260ms ease';
        smallInner.style.transform = 'rotateY(180deg)';
      }, 230);
    }

    // When next draw while card is showing, we simulate "flip away then show new"
    function onDraw() {
      if (drawBtn.disabled) return;
      if (deckEl.children.length === 0) {
        drawBtn.disabled = true;
        return;
      }

      // Remove topmost deck card (last child is visually top)
      const top = deckEl.lastElementChild;
      if (top) {
        // animate the top disappearing slightly (visual feedback)
        top.style.transition = 'transform 260ms ease, opacity 260ms ease';
        top.style.transform = 'translateY(-6px) scale(.98)';
        top.style.opacity = '0.0';
        setTimeout(() => { if (top.parentNode) top.parentNode.removeChild(top); }, 280);
      }

      // Choose a random card text
      const text = cards[Math.floor(Math.random()*cards.length)];

      // If card already currently showing a face (smallInner transform is 180deg), "flip back and fade" then show new.
      const currentTransform = getComputedStyle(smallInner).transform;
      const isShowingFront = currentTransform !== 'none' && currentTransform !== 'matrix(1, 0, 0, 1, 0, 0)';

      if (isShowingFront) {
        // flip to halfway to hide current front, then flip to back (0deg), then do new flip.
        smallInner.style.transition = 'transform 220ms ease';
        smallInner.style.transform = 'rotateY(90deg)';
        setTimeout(() => {
          // rotate to 0deg showing back side
          smallInner.style.transition = 'transform 260ms ease, opacity 260ms ease';
          smallInner.style.transform = 'rotateY(0deg)';
          // small flash fade
          smallInner.style.opacity = '0.88';
          setTimeout(() => { smallInner.style.opacity = '1'; }, 260);

          // now reveal the new text with flip
          setTimeout(() => flipSmallCardTo(text), 320);
        }, 240);
      } else {
        // currently showing back ‚Äî just flip to reveal new text
        flipSmallCardTo(text);
      }

      // If deck empty after removal, disable
      setTimeout(()=>{
        if (deckEl.children.length === 0) drawBtn.disabled = true;
      }, 350);
    }

    function toggleHint(btn) {
      btn.classList.toggle('used');
    }

    /* ---------------- Map + Boundary + Live location ---------------- */
    // Coordinates extracted from your KML
    const gameBoundaryCoords = [
      { lat: 37.7448137, lng: -122.4682269 },
      { lat: 37.744101,  lng: -122.4680982 },
      { lat: 37.7444404, lng: -122.4642358 },
      { lat: 37.7463408, lng: -122.4617789 },
      { lat: 37.7473588, lng: -122.4619291 },
      { lat: 37.7477829, lng: -122.4623475 },
      { lat: 37.7475624, lng: -122.462605  },
      { lat: 37.7472739, lng: -122.462766  },
      { lat: 37.7469176, lng: -122.4628035 },
      { lat: 37.7467183, lng: -122.4628625 },
      { lat: 37.7466504, lng: -122.4636994 },
      { lat: 37.7463903, lng: -122.4642273 },
      { lat: 37.7459619, lng: -122.4648335 },
      { lat: 37.7459025, lng: -122.4651447 },
      { lat: 37.7460297, lng: -122.4655738 },
      { lat: 37.7459788, lng: -122.4657187 },
      { lat: 37.7457413, lng: -122.4657669 },
      { lat: 37.7456942, lng: -122.4657661 },
      { lat: 37.7455797, lng: -122.4673057 },
      { lat: 37.7448137, lng: -122.4682269 }
    ];

    // Map initializer (called as Maps API callback)
    function initMap() {
      // center based near area
      const center = { lat: 37.7459, lng: -122.4655 };
      window.map = new google.maps.Map(document.getElementById('map'), {
        center,
        zoom: 16,
        mapTypeId: 'roadmap'
      });

      // polygon
      const poly = new google.maps.Polygon({
        paths: gameBoundaryCoords,
        strokeColor: '#000',
        strokeOpacity: 0.9,
        strokeWeight: 2,
        fillColor: '#555',
        fillOpacity: 0.35,
        clickable: false
      });
      poly.setMap(window.map);

      // live location marker (blue dot)
      if (navigator.geolocation) {
        navigator.geolocation.watchPosition(
          pos => {
            const userPos = { lat: pos.coords.latitude, lng: pos.coords.longitude };

            if (!window.userMarker) {
              window.userMarker = new google.maps.Marker({
                position: userPos,
                map: window.map,
                title: 'You are here',
                optimized: false,
                icon: {
                  path: google.maps.SymbolPath.CIRCLE,
                  scale: 8,
                  fillColor: '#4285F4',
                  fillOpacity: 1,
                  strokeWeight: 2,
                  strokeColor: '#fff'
                }
              });
              window.map.setCenter(userPos);
            } else {
              window.userMarker.setPosition(userPos);
            }
          },
          err => {
            console.warn('Geolocation watch error', err);
          },
          { enableHighAccuracy: true, maximumAge: 2000, timeout: 5000 }
        );
      } else {
        console.warn('Geolocation not supported');
      }
    }

    // Expose initMap for Google Maps callback
    window.initMap = initMap;
  </script>

  <!-- Load Google Maps JS API (replace YOUR_API_KEY with your API key) -->
  <!-- IMPORTANT: Use a valid API key + enable Maps JavaScript API + billing; test via localhost or hosted site -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaxXCVpIPw-odvVBz6YB5hbq3s8Ql1_6o&callback=initMap" async defer></script>
</body>
</html>
```
